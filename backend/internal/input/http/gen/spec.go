// Package gen provides primitives to interact with the openapi HTTP API.
//
// Code generated by github.com/oapi-codegen/oapi-codegen/v2 version v2.5.1 DO NOT EDIT.
package gen

import (
	"bytes"
	"compress/gzip"
	"encoding/base64"
	"fmt"
	"net/url"
	"path"
	"strings"

	"github.com/getkin/kin-openapi/openapi3"
)

// Base64 encoded, gzipped, json marshaled Swagger object
var swaggerSpec = []string{

	"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",
}

// GetSwagger returns the content of the embedded swagger specification file
// or error if failed to decode
func decodeSpec() ([]byte, error) {
	zipped, err := base64.StdEncoding.DecodeString(strings.Join(swaggerSpec, ""))
	if err != nil {
		return nil, fmt.Errorf("error base64 decoding spec: %w", err)
	}
	zr, err := gzip.NewReader(bytes.NewReader(zipped))
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}
	var buf bytes.Buffer
	_, err = buf.ReadFrom(zr)
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}

	return buf.Bytes(), nil
}

var rawSpec = decodeSpecCached()

// a naive cached of a decoded swagger spec
func decodeSpecCached() func() ([]byte, error) {
	data, err := decodeSpec()
	return func() ([]byte, error) {
		return data, err
	}
}

// Constructs a synthetic filesystem for resolving external references when loading openapi specifications.
func PathToRawSpec(pathToFile string) map[string]func() ([]byte, error) {
	res := make(map[string]func() ([]byte, error))
	if len(pathToFile) > 0 {
		res[pathToFile] = rawSpec
	}

	return res
}

// GetSwagger returns the Swagger specification corresponding to the generated code
// in this file. The external references of Swagger specification are resolved.
// The logic of resolving external references is tightly connected to "import-mapping" feature.
// Externally referenced files must be embedded in the corresponding golang packages.
// Urls can be supported but this task was out of the scope.
func GetSwagger() (swagger *openapi3.T, err error) {
	resolvePath := PathToRawSpec("")

	loader := openapi3.NewLoader()
	loader.IsExternalRefsAllowed = true
	loader.ReadFromURIFunc = func(loader *openapi3.Loader, url *url.URL) ([]byte, error) {
		pathToFile := url.String()
		pathToFile = path.Clean(pathToFile)
		getSpec, ok := resolvePath[pathToFile]
		if !ok {
			err1 := fmt.Errorf("path not found: %s", pathToFile)
			return nil, err1
		}
		return getSpec()
	}
	var specData []byte
	specData, err = rawSpec()
	if err != nil {
		return
	}
	swagger, err = loader.LoadFromData(specData)
	if err != nil {
		return
	}
	return
}
